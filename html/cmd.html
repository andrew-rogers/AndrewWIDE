<html>
  <meta charset="utf-8">
  <body>
    <textarea rows="10" id="ta" style="width: 100%;" placeholder="stdin">All the contents of this textarea goes to stdin
including the above line, this line
and this one!</textarea><br>
    <textarea rows="15" id="out" style="width: 100%;" placeholder="stdout" readonly></textarea><br>
    <textarea rows="1" id="script" style="width: 100%;">printf "Vowels removed:\n"; sed 's/[aeiou]//g'; echo -e "\n\nFiles in $PWD:"; ls -l; echo; echo -e "blah\nmore blah" | mycat</textarea><br>
    <button onclick="run()">Run</button>
  </body>
  <script>
function query_sh(script,stdin,callback)
{
  var blob = new Blob([script,'\n\n',stdin], { type: "text/plain" });
  var xmlhttp = new XMLHttpRequest(); // new HttpRequest instance
  xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState == XMLHttpRequest.DONE) {
      if(callback)callback(xmlhttp.responseText);
    }
  };
  xmlhttp.open("POST", "/cgi-bin/aw.sh", true);
  xmlhttp.send(blob);
}

function display(obj)
{
  document.getElementById("out").value=obj;
}

function run()
{
  var script=document.getElementById("script").value;
  var text=document.getElementById("ta").value;
  query_sh(script, text, display);
}
  </script>
</html>
