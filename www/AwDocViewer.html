<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
        <script src="AwDocRenderer.js"></script>
        <script src="DiagramRenderer.js"></script>
        <script src="JsonQuery.js"></script>
        <script src="fileselector.js"></script>
        <script src="FileSystem.js"></script>
        <script src="file.js"></script>
        <script src="MathJaxMarkdownRenderer.js"></script>
        <script src="menu.js"></script>
        <script src="svgarray.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/markedjs/marked/marked.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_SVG"></script>
        <script src="AwCppRenderer.js"></script>
        <script src="jsonarraybuffers.js"></script>
        <script src="PlotRenderer.js"></script>
        <script src="Diagram/Geometry.js"></script>
        <script src="Diagram/Plot/Plot.js"></script>
        <script src="Diagram/Shapes/SignalProcessing.js"></script>
        <script src="Diagram/SvgFigure.js"></script>
        <script src="XML.js"></script>
        <script src="NavBar.js"></script>
    </head>
    <body>
        <script>
        
var fn = window.location.search;

var open_doc = function( fn ) {
    var awdr = new AwDocRenderer();
    new AwCppRenderer(fn, awdr)
    awdr.registerRenderer("mjmd", new MathJaxMarkdownRenderer());
    awdr.registerRenderer("diagram", new DiagramRenderer());
    awdr.registerRenderer("plot", new PlotRenderer());

    FileSystem.readFile(fn, function( err, content ) {
        awdr.render(content);
        awdr.start();
    });
};

if (fn.startsWith("?file=")) {
    var fn = decodeURIComponent(fn.slice(6));
    open_doc(fn);
}
else {
    div=document.createElement("div");
    document.body.appendChild(div);
    var fs = new FileSelector(div, FileSystem.list);
    fs.show(function(fn){
        open_doc(fn);
    });
}

        </script>
    </body>
</html>

